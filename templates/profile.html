{% extends "layout.html" %}
{% block content %}
<section class="vh-100 d-flex align-items-center justify-content-center bg-light">
  <div class="card shadow p-4" style="width: 550px;">
    <h3 class="text-center mb-4">My Profile</h3>

    <form action="/profile" method="POST" enctype="multipart/form-data">
      <!-- Profile Picture -->
      <div class="text-center mb-4">
        <img src="{{ url_for('static', filename='uploads/' + (user.profile_pic or 'default.jpg')) }}"
        alt="Profile"
        class="rounded-circle"
        width="100"
        height="100">
        <h2>{{ user.username }}</h2>
        <div class="mt-2">
          <input type="file" name="profile_pic" accept="image/*" class="form-control form-control-sm">
        </div>
      </div>

      <!-- Name -->
      <div class="input-group mb-3">
        <span class="input-group-text"><i class="fas fa-user"></i></span>
        <input type="text" name="name" class="form-control" value="{{ user.name }}" required>
      </div>

      <!-- Email -->
      <div class="input-group mb-3">
        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
        <input type="email" name="email" class="form-control" value="{{ user.email }}" required>
      </div>

      <!-- Old Password -->
      <div class="input-group mb-3">
        <span class="input-group-text"><i class="fas fa-lock"></i></span>
        <input type="password" name="old_password" class="form-control" placeholder="Enter current password">
      </div>

      <!-- New Password -->
      <div class="input-group mb-4">
        <span class="input-group-text"><i class="fas fa-lock"></i></span>
        <input type="password" name="password" class="form-control" placeholder="Enter new password">
      </div>

      <button type="submit" class="btn btn-dark w-100 mb-2">Save Changes</button>

      <div class="text-center">
        <a href="{{ url_for('logout') }}" class="text-danger">Logout</a>
      </div>
    </form>
  </div>
</section>
{% endblock %}
